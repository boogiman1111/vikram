<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Health Tech - Live Hospital Search + AI Chatbot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* [Styles remain unchanged â€“ omitted here for brevity] */
    /* Copy your existing CSS here â€“ no changes needed */
  </style>
</head>
<body>
  <header>
    <img src="https://cdn-icons-png.flaticon.com/512/3209/3209019.png" alt="Health Logo" />
    <span style="font-size: 24px; vertical-align: middle;">Health Tech Portal</span>
  </header>

  <div id="loginBox" class="box">
    <img src="https://cdn-icons-png.flaticon.com/512/2785/2785819.png" class="health-image" alt="Health Icon" />
    <h2>Login to Search Hospitals</h2>
    <form onsubmit="return loginUser()">
      <input type="text" id="username" placeholder="Username" required />
      <input type="password" id="password" placeholder="Password" required />
      <input type="submit" value="Login" />
    </form>
  </div>

  <div id="searchBox" class="box" style="display: none;">
    <h2>Search Indian Hospitals (Live on Google)</h2>
    <form action="https://www.google.com/search" method="GET" target="_blank">
      <input type="text" name="q" id="searchInput" placeholder="Type hospital or city (e.g. Apollo Delhi)" required />
      <input type="submit" value="Search on Google" />
    </form>
    <button class="logout-btn" onclick="logout()">Logout</button>
    <div class="info-box">
      ðŸ’¡ Tip: Use city names + hospital types for better results. Example: <strong>Cardiology hospitals Chennai</strong>
    </div>
  </div>

  <div id="chatbotBox">
    <h2>AI Health Assistant</h2>
    <div id="chatOutput"></div>
    <textarea id="chatInput" placeholder="Ask me about hospitals, health tips..."></textarea>
    <div style="text-align:right; margin-top: 5px;">
      <button onclick="sendMessage()">Send</button>
      <button class="close-btn" onclick="hideChatbot()">Close</button>
    </div>
  </div>

  <button id="openChatBtn" onclick="showChatbot()">ðŸ’¬</button>

  <script>
    function loginUser() {
      document.getElementById("loginBox").style.display = "none";
      document.getElementById("searchBox").style.display = "block";
      return false;
    }

    function logout() {
      document.getElementById("loginBox").style.display = "block";
      document.getElementById("searchBox").style.display = "none";
      document.getElementById("username").value = "";
      document.getElementById("password").value = "";
      hideChatbot();
    }

    function showChatbot() {
      document.getElementById("chatbotBox").style.display = "flex";
      document.getElementById("openChatBtn").style.display = "none";
      document.getElementById("chatInput").focus();
    }

    function hideChatbot() {
      document.getElementById("chatbotBox").style.display = "none";
      document.getElementById("openChatBtn").style.display = "block";
    }

    async function sendMessage() {
      const input = document.getElementById("chatInput");
      const output = document.getElementById("chatOutput");
      const userMessage = input.value.trim();
      if (!userMessage) return;

      output.innerHTML += `<div><b>You:</b> ${escapeHtml(userMessage)}</div>`;
      input.value = "";
      output.innerHTML += `<div id="loading"><i>AI is typing...</i></div>`;
      output.scrollTop = output.scrollHeight;

      try {
        // ðŸ§ª Mock response for Vercel static hosting
        await new Promise((res) => setTimeout(res, 1000)); // Simulate delay
        const aiResponse = `This is a mock AI response to: "${userMessage}"`;

        const loadingElem = document.getElementById("loading");
        if (loadingElem) loadingElem.remove();

        output.innerHTML += `<div><b>AI:</b> ${escapeHtml(aiResponse)}</div>`;
        output.scrollTop = output.scrollHeight;
      } catch (err) {
        const loadingElem = document.getElementById("loading");
        if (loadingElem) loadingElem.remove();
        output.innerHTML += `<div><b>AI:</b> Sorry, something went wrong. Please try again later.</div>`;
        output.scrollTop = output.scrollHeight;
      }
    }

    function escapeHtml(text) {
      return text.replace(/[&<>"']/g, function (m) {
        return {
          "&": "&amp;",
          "<": "&lt;",
          ">": "&gt;",
          '"': "&quot;",
          "'": "&#39;",
        }[m];
      });
    }
  </script>
</body>
</html>


